<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –§–∏—Ç–Ω–µ—Å-–¶–µ–ª–µ–π</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #0f172a, #1e293b);
      color: #f8fafc;
      min-height: 100vh;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    h1 {
      margin-top: 30px;
      font-size: 2rem;
      color: #facc15;
    }
    form {
      background: #1e293b;
      padding: 25px;
      border-radius: 15px;
      width: 100%;
      max-width: 400px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
      margin-top: 20px;
    }
    input, select, button {
      width: 100%;
      margin-bottom: 15px;
      padding: 12px;
      border-radius: 8px;
      border: none;
      font-size: 1rem;
      background: #334155;
      color: #f8fafc;
    }
    select {
      background: #334155;
      max-height: 200px;
      overflow-y: auto;
    }
    button {
      background: #facc15;
      color: #000;
      font-weight: bold;
      transition: background 0.3s;
    }
    button:hover {
      background: #eab308;
    }
    .result {
      margin-top: 25px;
      padding: 20px;
      background: #334155;
      border-radius: 15px;
      width: 100%;
      max-width: 400px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
      font-size: 1rem;
    }
    .footer {
      margin-top: 20px;
      font-size: 0.8rem;
      color: #94a3b8;
      text-align: center;
    }
    #modeToggle {
      margin-top: 20px;
      background-color: #facc15;
      padding: 10px;
      font-size: 1rem;
      border-radius: 8px;
      cursor: pointer;
    }
    body.light-mode {
      background: #f8fafc;
      color: #333;
    }
    body.light-mode .form, body.light-mode .result {
      background: #fff;
      color: #333;
    }
    body.light-mode button {
      background: #000;
      color: #fff;
    }
  </style>
</head>
<body>

  <h1>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –§–∏—Ç–Ω–µ—Å-–¶–µ–ª–µ–π</h1>

  <form id="calcForm">
    <input type="number" id="age" placeholder="–í–æ–∑—Ä–∞—Å—Ç" required>
    <input type="number" id="weight" placeholder="–í–µ—Å (–∫–≥)" required>
    <input type="number" id="height" placeholder="–†–æ—Å—Ç (—Å–º)" required>
    <select id="gender" required>
      <option value="">–ü–æ–ª</option>
      <option value="male">–ú—É–∂—Å–∫–æ–π</option>
      <option value="female">–ñ–µ–Ω—Å–∫–∏–π</option>
    </select>
    <select id="activity" required>
      <option value="">–£—Ä–æ–≤–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</option>
      <option value="1.2">–°–∏–¥—è—á–∏–π: –ú–∞–ª–æ –∏–ª–∏ –Ω–µ—Ç —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π, –±–æ–ª—å—à–∞—è —á–∞—Å—Ç—å –¥–Ω—è —Å–∏–¥—è—á–∞—è</option>
      <option value="1.375">–õ–µ–≥–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è 1-2 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é, 2-5 —Ç—ã—Å. —à–∞–≥–æ–≤ –≤ –¥–µ–Ω—å</option>
      <option value="1.55">–£–º–µ—Ä–µ–Ω–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è 3-4 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é, 5-10 —Ç—ã—Å. —à–∞–≥–æ–≤ –≤ –¥–µ–Ω—å</option>
      <option value="1.725">–ê–∫—Ç–∏–≤–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è 5+ —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é, 10 —Ç—ã—Å. —à–∞–≥–æ–≤ –≤ –¥–µ–Ω—å</option>
      <option value="1.9">–û—á–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–∞—è: –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ 6-7 —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é + 15 —Ç—ã—Å. —à–∞–≥–æ–≤ –≤ –¥–µ–Ω—å</option>
    </select>
    <input type="number" id="bodyfat" placeholder="–ü—Ä–æ—Ü–µ–Ω—Ç –∂–∏—Ä–∞ –≤ —Ç–µ–ª–µ" min="0" max="100" required>
    <select id="goal" required>
      <option value="">–¶–µ–ª—å</option>
      <option value="cut">–ü–æ—Ç–µ—Ä—è –∂–∏—Ä–∞</option>
      <option value="bulk">–ù–∞–±–æ—Ä –º–∞—Å—Å—ã</option>
      <option value="recomp">–†–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è —Ç–µ–ª–∞</option>
      <option value="maintenance">–ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –≤–µ—Å–∞</option>
    </select>
    <button type="submit">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
  </form>

  <div class="result" id="result" style="display:none;"></div>

  <div class="footer">made by daulet bauyrzhanuly</div>

  <button id="modeToggle">–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ —Å–≤–µ—Ç–ª—ã–π —Ä–µ–∂–∏–º</button>

  <canvas id="weightChart" width="400" height="200"></canvas>

<script>
  let chartInstance = null;

  document.getElementById('calcForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const age = parseInt(document.getElementById('age').value);
    const weight = parseFloat(document.getElementById('weight').value);
    const height = parseInt(document.getElementById('height').value);
    const gender = document.getElementById('gender').value;
    const activity = parseFloat(document.getElementById('activity').value);
    const goal = document.getElementById('goal').value;
    const bodyfat = parseFloat(document.getElementById('bodyfat').value);
    
    if (!age || !weight || !height || !gender || !activity || !goal || !bodyfat) {
      alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è.');
      return;
    }

    let bmr;
    
    const leanMass = weight * (1 - (bodyfat / 100));
    bmr = 370 + (21.6 * leanMass);

    const maintenance = bmr * activity;
    let calories;
    let weeklyChange;

    if (goal === 'cut') {
      calories = maintenance - 500;
      weeklyChange = "–û–∂–∏–¥–∞–µ–º–∞—è –ø–æ—Ç–µ—Ä—è –∂–∏—Ä–∞: ~0.5 –∫–≥/–Ω–µ–¥–µ–ª—é.";
    } else if (goal === 'bulk') {
      calories = maintenance + 300;
      weeklyChange = "–û–∂–∏–¥–∞–µ–º—ã–π –ø—Ä–∏—Ä–æ—Å—Ç –º—ã—à—Ü: ~0.25 –∫–≥/–Ω–µ–¥–µ–ª—é.";
    } else if (goal === 'recomp') {
      calories = maintenance - (Math.random() * 100 + 200); // slight deficit of 200-300 calories
      weeklyChange = "–û–∂–∏–¥–∞–µ–º—ã–µ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –≤ –±–∞–ª–∞–Ω—Å–µ –º—ã—à—Ü –∏ –∂–∏—Ä–∞.";
    } else if (goal === 'maintenance') {
      calories = maintenance;
      weeklyChange = "–ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –≤–µ—Å–∞.";
    }

    const protein = weight * 2.2;
    const fat = weight * 0.8;
    const carbs = (calories - (protein * 4) - (fat * 9)) / 4;

    document.getElementById('result').style.display = 'block';
    document.getElementById('result').innerHTML = ` 
      <h3>üéØ –í–∞—à–∏ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
      <p><strong>–ö–∞–ª–æ—Ä–∏–∏ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è:</strong> ${Math.round(maintenance)} –∫–∫–∞–ª/–¥–µ–Ω—å</p>
      <p><strong>–¶–µ–ª–µ–≤—ã–µ –∫–∞–ª–æ—Ä–∏–∏:</strong> ${Math.round(calories)} –∫–∫–∞–ª/–¥–µ–Ω—å</p>
      <p><strong>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–∞–∫—Ä–æ—ç–ª–µ–º–µ–Ω—Ç—ã:</strong></p>
      <ul>
        <li>–ë–µ–ª–∫–∏: ${Math.round(protein)} –≥/–¥–µ–Ω—å</li>
        <li>–ñ–∏—Ä—ã: ${Math.round(fat)} –≥/–¥–µ–Ω—å</li>
        <li>–£–≥–ª–µ–≤–æ–¥—ã: ${Math.round(carbs)} –≥/–¥–µ–Ω—å</li>
      </ul>
      <p><strong>–û–∂–∏–¥–∞–µ–º–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞ –Ω–µ–¥–µ–ª—é:</strong> ${weeklyChange}</p>
    `;

    const weightData = [];
    let initialWeight = weight;
    let weeklyChangeValue = (goal === 'cut') ? -0.5 : (goal === 'bulk') ? 0.25 : (goal === 'recomp') ? (Math.random() * 0.2 - 0.1) : 0;

    for (let i = 0; i < 8; i++) {
      weightData.push(initialWeight + (weeklyChangeValue * (i + 1)));
    }

    if (chartInstance) {
      chartInstance.destroy();
    }

    const ctx = document.getElementById('weightChart').getContext('2d');
    chartInstance = new Chart(ctx, {
      type: 'line',
      data: {
        labels: ['–ù–µ–¥–µ–ª—è 1', '–ù–µ–¥–µ–ª—è 2', '–ù–µ–¥–µ–ª—è 3', '–ù–µ–¥–µ–ª—è 4', '–ù–µ–¥–µ–ª—è 5', '–ù–µ–¥–µ–ª—è 6', '–ù–µ–¥–µ–ª—è 7', '–ù–µ–¥–µ–ª—è 8'],
        datasets: [{
          label: '–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º—ã–π –≤–µ—Å',
          data: weightData,
          borderColor: '#facc15',
          fill: false,
          tension: 0.1
        }]
      },
      options: {
        responsive: true,
        plugins: {
          title: {
            display: true,
            text: '–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º—ã–π –≤–µ—Å —Å —Ç–µ—á–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏'
          }
        }
      }
    });
  });

  document.getElementById('modeToggle').addEventListener('click', function() {
    document.body.classList.toggle('light-mode');
    const mode = document.body.classList.contains('light-mode') ? 'Light' : 'Dark';
    document.getElementById('modeToggle').textContent = `–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ ${mode} —Ä–µ–∂–∏–º`;
  });
</script>

</body>
</html>
